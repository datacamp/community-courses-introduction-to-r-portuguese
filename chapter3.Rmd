--- 
title_meta  :Capítulo 3
title       : Matrizes
description : Neste capítulo você irá aprender como trabalhar com matrizes em R. Até o final deste capítulo, você será capaz de criar matrizes e entender como fazer computação básica com ela. Você irá analisar algumas informações sobre Star Wars para ilustrar o uso de matrizes em R. Que a Força esteja com você!

--- type:NormalExercise xp:100 skills:1 key:d61aeba84c
## O que é uma matriz?

Em R, uma matriz (ou matrix, em inglês) é uma coleção de elementos com o mesmo tipo de dado (numérico, caracter ou lógico)organizado em um número fixo de linhas e colunas. Enquanto você estiver trabalhando apenas com linhas e colunas, sua matriz é chamada de matriz bi-dimensional (two-dimensional).

Você pode construir uma matriz em R com a função [`matrix()`](http://www.rdocumentation.org/packages/base/functions/matrix). Considere o seguinte exemplo:

```
matrix(1:9, byrow = TRUE, nrow = 3)
```

Na função [`matrix()`](http://www.rdocumentation.org/packages/base/functions/matrix):

- O primeiro argumento é uma coleção de elementos que R irá organizar em linhas e colunas na matriz. Aqui, nós usamos `1:9`, o qual é um atalho para `c(1, 2, 3, 4, 5, 6, 7, 8, 9)`.
- O argumento `byrow` indica que a matriz será preenchida pelas linhas. Se nós quisessemos que a matriz fosse preenchida pelas colunas, nós colocaríamos `byrow = FALSE`.
- O terceiro argumento `nrow` indica que a matriz deve ter três colunas.

*** =instructions
Construa uma matriz com 3 linhas contendo os números de 1 a 9, preenchida pela linha.

*** =hint
Leia a tarefa com atenção, a resposta já foi dada!

*** =pre_exercise_code
```{r}
# no pec
```

*** =sample_code
```{r}
# Construa uma matriz com 3 linhas que contenha os números de 1 a 9

```

*** =solution
```{r}
# Construa uma matriz com 3 linhas que contenha os números de 1 a 9
matrix(1:9, byrow = TRUE, nrow = 3)
```

*** =sct
```{r}
test_function("matrix", c("data", "byrow", "nrow"),
              incorrect_msg = "Você criou a matriz corretamente? Dá uma olhada na descrição da tarefa. A resposta já foi dada!")
test_output_contains("matrix(1:9, byrow=TRUE, nrow=3)",
                     incorrect_msg = "Parece haver um problema com a declaração da matriz. Dá uma olhada na descrição da tarefa. A resposta já foi dada!")
success_msg("Ótimo! Continue para o próximo exercício.")
```


--- type:NormalExercise xp:100 skills:1 key:effc2fb945
## Analisar matrizes você deve

É hora de sujar as mãos. Nos exercícios seguintes você irá analisar os números de bilheteria da franquia Star Wars. Que a Força esteja com você!

No editor ao lado, três vetores foram criados. Cada um deles representa a bilheteria levantada pelos três primeiros filmes da franquia. O primeiro elemento de cada vetor indica a bilheteria que o filme fez nos Estados Unidos (em milhões de dólares); o segundo elemento é quanto cada filme faturou fora dos EUA (fonte: Wikipedia).

Neste exercício você irá combinar todas essas peças em um único vetor. Em seguida, você irá criar uma matriz a partir desse vetor.

*** =instructions
- Use `c(new_hope, empire_strikes, return_jedi)` para combinar os três elementos em um único vetor. Chame esse vetor de `box_office`.
- Construa uma matriz de três linhas, onde cada uma representa um filme. Use a função `matrix()` para fazer isso. O primeiro argumento será o vetor `box_office`, contendo todas as bilheterias. Em seguida, você terá que especificar `nrow = 3` e `byrow = TRUE`. Chame essa matriz de `star_wars_matrix`.

*** =hint
- `box_office <- c(new_hope, empire_strikes, return_jedi)` irá combinar todos os valores dos diferentes vetores em um único vetor de 6 elementos.
- Já `matrix(box_office, nrow = ..., by_row ...)` é um modelo para a solução da segunda instrução.

*** =pre_exercise_code
```{r}
# no pec
```

*** =sample_code
```{r}
# Bilheteria de Star Wars (em milhões!)
new_hope <- c(460.998, 314.4)
empire_strikes <- c(290.475, 247.900)
return_jedi <- c(309.306, 165.8)

# Crie box_office
box_office <- 

# Crie star_wars_matrix
star_wars_matrix <- 
```

*** =solution
```{r}
# Bilheteria de Star Wars (em milhões!)
new_hope <- c(460.998, 314.4)
empire_strikes <- c(290.475, 247.900)
return_jedi <- c(309.306, 165.8)

# Crie box_office
box_office <- c(new_hope, empire_strikes, return_jedi)

# Crie star_wars_matrix
star_wars_matrix <- matrix(box_office, nrow = 3, byrow = TRUE) 
```

*** =sct
```{r}
msg <- "Não mude nada nas variáveis de bilheteria `new_hope`, `empire_strikes` e `return_jedi`!"
test_object("new_hope", undefined_msg = msg, incorrect_msg = msg)
test_object("empire_strikes", undefined_msg = msg, incorrect_msg = msg)
test_object("return_jedi", undefined_msg = msg, incorrect_msg = msg)

test_object("box_office", incorrect_msg = "Você combinou corretamente os valores de `new_hope`, `empire_strikes` e `return_jedi` no vetor `box_office`?")

test_function("matrix", c("data", "nrow", "byrow"),
              incorrect_msg = "Tenha certeza de especificar corretamente os argumentos em `matrix()`: `box_office`, `nrow = 3`, `by_row = TRUE`.")

test_object("star_wars_matrix",
            incorrect_msg = "Você armazenou corretamente o resultado de `matrix()` em `star_wars_matrix`?")

success_msg("Realmente a Força está com você! Continue para o próximo exercício")
```


--- type:NormalExercise xp:100 skills:1 key:f734e8bf74
## Nomeando uma matriz

Para te ajudar a lembrar o que é armazenado em `star_wars_matrix`, provavelmente você iria gostar de colocar o nome dos filmes em cada linha. Isso não só te ajudaria a ler seus dados, como também seria útil poder selecionar certos elementos na matriz.

Similar aos vetores, você pode adicionar nomes nas linhas e colunas de uma matriz

```
rownames(my_matrix) <- row_names_vector
colnames(my_matrix) <- col_names_vector
```

Nos adiantamos e preparamos dois vetores para você: `region`, e `titles`. Você precisará desses vetores para nomear as colunas e linhas de `star_wars_matrix`, respectivamente.

*** =instructions
- Use `colnames()` para nomear as colunas da matriz `star_wars_matrix` utilizando `region` como valor.
- Use `rownames()` para nomear as linhas de `star_wars_matrix` utilizando `titles` como valor.
- Exiba o valor de `star_wars_matrix` para ver o resultado do seu trabalho.

*** =hint
Você pode usar `colnames(star_wars_matrix) <- region` para nomear as colunas de `star_wars_matrix`. Faça algo similar para nomear as linhas.

*** =pre_exercise_code
```{r}
# no pec
```

*** =sample_code
```{r}
# Bilheteria de Star Wars (em milhões!)
new_hope <- c(460.998, 314.4)
empire_strikes <- c(290.475, 247.900)
return_jedi <- c(309.306, 165.8)

# Construa uma matriz
star_wars_matrix <- matrix(c(new_hope, empire_strikes, return_jedi), nrow = 3, byrow = TRUE)

# Vetores region e title, que serão usados para nomear
region <- c("US", "non-US")
titles <- c("A New Hope", "The Empire Strikes Back", "Return of the Jedi")

# Use region para nomear as colunas


# Use titles para nomear as linhas


# Exiba star_wars_matrix
```

*** =solution
```{r}
# Bilheteria de Star Wars (em milhões!)
new_hope <- c(460.998, 314.4)
empire_strikes <- c(290.475, 247.900)
return_jedi <- c(309.306, 165.8)

# Construa uma matriz
star_wars_matrix <- matrix(c(new_hope, empire_strikes, return_jedi), nrow = 3, byrow = TRUE)

# Vetores region e title, que serão usados para nomear
region <- c("US", "non-US")
titles <- c("A New Hope", "The Empire Strikes Back", "Return of the Jedi")

# Use region para nomear as colunas
colnames(star_wars_matrix) <- region

# Use titles para nomear as linhas
rownames(star_wars_matrix) <- titles

# Exiba star_wars_matrix
star_wars_matrix
```

*** =sct
```{r}
msg <- "Não mude nada nas variáveis de bilheteria `new_hope`, `empire_strikes` e `return_jedi`!"
test_object("new_hope", undefined_msg = msg, incorrect_msg = msg)
test_object("empire_strikes", undefined_msg = msg, incorrect_msg = msg)
test_object("return_jedi", undefined_msg = msg, incorrect_msg = msg)
msg <- "Não altere o conteúdo de `star_wars_matrix`; somente o nomes das colunas e linhas!" 
test_object("star_wars_matrix", incorrect_msg = msg)
msg <- "Não altere nada nos vetores `region` e `titles`. Eles já foram definidos para você."
test_object("region", undefined_msg = msg, incorrect_msg = msg)
test_object("titles", undefined_msg = msg, incorrect_msg = msg)
test_object("star_wars_matrix", eq_condition = "equal",
            incorrect_msg = "Você definiu as linhas e colunas de `star_wars_matrix` corretamente? Use `colnames(star_wars_matrix) <- region` para nomear as colunas; faça algo similar com as linhas.")
test_output_contains("star_wars_matrix", incorrect_msg = "Não se esqueça de exibir `star_wars_matrix` depois que você nomear as linhas e colunas.")
success_msg("Bom trabalho! Você está no caminho de se tornar um jedi em R! Continue para o próximo exercício.")
```


--- type:NormalExercise xp:100 skills:1 key:3fd7499a12
## Calculando a bilheteria mundial

A coisa mais importante para que um filme se torne uma lenda é a sua bilheteria mundial.

Para calcular o faturamento total da bilheteria dos três primeiros filmes de Star Wars, você precisará pegar a soma das colunas US e non-US na matriz.

Em R, a função [`rowSums()`](http://www.rdocumentation.org/packages/base/functions/colSums) convenientemente calcula o total de cada linha de uma matriz. Essa função cria um novo vetor:

```
rowSums(my_matrix)
```

*** =instructions
Calcule a bilheteria mundial dos três filmes e armazene-os em um vetor chamado `worldwide_vector`.

*** =hint
`rowSums(star_wars_matrix)` irá calcular a soma de cada linha, criando assim o total de bilheteria para cada filme.

*** =pre_exercise_code
```{r}
# no pec
```

*** =sample_code
```{r}
# Construa star_wars_matrix
box_office <- c(460.998, 314.4, 290.475, 247.900, 309.306, 165.8)
star_wars_matrix <- matrix(box_office, nrow = 3, byrow = TRUE,
                           dimnames = list(c("A New Hope", "The Empire Strikes Back", "Return of the Jedi"), 
                                           c("US", "non-US")))

# Calcule a bilheteria mundial
worldwide_vector <- 
```

*** =solution
```{r}
# Construa star_wars_matrix
box_office <- c(460.998, 314.4, 290.475, 247.900, 309.306, 165.8)
star_wars_matrix <- matrix(box_office, nrow = 3, byrow = TRUE,
                           dimnames = list(c("A New Hope", "The Empire Strikes Back", "Return of the Jedi"), 
                                           c("US", "non-US")))

# Calcule a bilheteria mundial
worldwide_vector <- rowSums(star_wars_matrix)
```

*** =sct
```{r}
msg <- "Não altere nada nas variáveis `box_office_all` e `star_wars_matrix`!"
test_object("box_office", undefined_msg = msg, incorrect_msg = msg)
test_object("star_wars_matrix", undefined_msg = msg, incorrect_msg = msg)
test_object("worldwide_vector", incorrect_msg = "Digite `rowSums()` usando `star_wars_matrix` como argumento e armazene o resultado em `worldwide_vector`.")
success_msg("Muito bem! Continue para o próximo exercício.")
```


--- type:NormalExercise xp:100 skills:1 key:86b87a8545
## Adicionando uma coluna para a bilheteria mundia

No exercício anterior você calculou o vetor que contém a bilheteria recebida por cada um dos três primeiros filmes de Star Wars. Contudo, esse vetor não faz parte da matriz `star_wars_matrix`.

Você pode adicionar uma ou várias colunas a uma matriz com a função [`cbind()`](http://www.rdocumentation.org/packages/base/functions/cbind), que une matrizes e/ou vetores por uma coluna. Por exemplo:

```
big_matrix <- cbind(matrix1, matrix2, vector1 ...)
```

*** =instructions
Adicione `worldwide_vector` como uma nova coluna de `star_wars_matrix` e armazene o resultado em all_wars_matrix. Use a função [`cbind()`](http://www.rdocumentation.org/packages/base/functions/cbind).

*** =hint
Neste exercício, você deve passar duas variáveis para `cbind()`: `star_wars_matrix` e `worldwide_vector`, nesta mesma ordem. Armazene o resultado em `all_wars_matrix`.

*** =pre_exercise_code
```{r}
# no pec
```

*** =sample_code
```{r}
# Construa star_wars_matrix
box_office <- c(460.998, 314.4, 290.475, 247.900, 309.306, 165.8)
star_wars_matrix <- matrix(box_office, nrow = 3, byrow = TRUE,
                           dimnames = list(c("A New Hope", "The Empire Strikes Back", "Return of the Jedi"), 
                                           c("US", "non-US")))

# A bilheteria mundial
worldwide_vector <- rowSums(star_wars_matrix)

# Coloque a nova variável worldwide_vector como uma coluna em star_wars_matrix
all_wars_matrix <- 
```

*** =solution
```{r}
# Construa star_wars_matrix
box_office <- c(460.998, 314.4, 290.475, 247.900, 309.306, 165.8)
star_wars_matrix <- matrix(box_office, nrow = 3, byrow = TRUE,
                           dimnames = list(c("A New Hope", "The Empire Strikes Back", "Return of the Jedi"), 
                                           c("US", "non-US")))

# A bilheteria mundial
worldwide_vector <- rowSums(star_wars_matrix)

# Coloque a nova variável worldwide_vector como uma coluna em star_wars_matrix
all_wars_matrix <- cbind(star_wars_matrix, worldwide_vector)
```

*** =sct
```{r}
msg <- "Não altere nada nas variáveis `box_office_all` e `star_wars_matrix`!"
test_object("box_office", undefined_msg = msg, incorrect_msg = msg)
test_object("star_wars_matrix", undefined_msg = msg, incorrect_msg = msg)
test_object("worldwide_vector",
            incorrect_msg = "Armazene o resultado de `rowSums(star_wars_matrix)` em `worldwide_vector`.")

msg <- "Você usou a função `cbind()` corretamente para adicionar `worldwide_vector` em `star_wars_matrix`? Você deve passar `star_wars_matrix` e `world_wide_vector` como argumento em `cbind()`, nesta mesma ordem. A matriz resultante `all_wars_matrix` deve conter 3 linhas e 3 colunas."
test_object("all_wars_matrix", incorrect_msg = msg)
success_msg("Bom trabalho! Depois de adicionar uma coluna a uma matriz, o próximo passo é adicionar linhas. Vamos aprender como fazer no próximo exercício.");
```


--- type:NormalExercise xp:100 skills:1 key:bcadb29139
## Adding a row

Just like every action has a reaction, every [`cbind()`](http://www.rdocumentation.org/packages/base/functions/cbind) has an [`rbind()`](http://www.rdocumentation.org/packages/base/functions/cbind). (We admit, we are pretty bad with metaphors.) 

Your R workspace, where all variables you defined 'live' ([check out what a workspace is](http://www.statmethods.net/interface/workspace.html)), has already been initialized and contains two matrices:

- `star_wars_matrix` that we have used all along, with data on the first trilogy,
- `star_wars_matrix2`, with similar data for the second trilogy. 

Type the name of these matrices in the console and hit Enter if you want to have a closer look. If you want to check out the contents of the workspace, you can type `ls()` in the console.

*** =instructions
Use `rbind()` to paste together `star_wars_matrix` and `star_wars_matrix2`, in this order. Assign the resulting matrix to `all_wars_matrix`.

*** =hint
Bind the two matrices together like this:
```
rbind(matrix1, matrix2)
```
Assign the result to `all_wars_matrix`.


*** =pre_exercise_code
```{r}
# Construct matrix
box_office_all <- c(461, 314.4, 290.5, 247.9, 309.3, 165.8)
movie_names <- c("A New Hope","The Empire Strikes Back","Return of the Jedi")
col_titles <- c("US","non-US")
star_wars_matrix <- matrix(box_office_all, nrow = 3, byrow = TRUE, dimnames = list(movie_names, col_titles))

# Construct matrix2
box_office_all2 <- c(474.5, 552.5, 310.7, 338.7, 380.3, 468.5)
movie_names2 <- c("The Phantom Menace", "Attack of the Clones", "Revenge of the Sith")
star_wars_matrix2 <- matrix(box_office_all2, nrow=3, byrow = TRUE, dimnames = list(movie_names2, col_titles))

# remove all except all_wars_matrix
rm(box_office_all)
rm(movie_names)
rm(col_titles)
rm(box_office_all2)
rm(movie_names2)
```

*** =sample_code
```{r}
# star_wars_matrix and star_wars_matrix2 are available in your workspace
star_wars_matrix  
star_wars_matrix2 

# Combine both Star Wars trilogies in one matrix
all_wars_matrix <- 
```

*** =solution
```{r}
# star_wars_matrix and star_wars_matrix2 are available in your workspace
star_wars_matrix  
star_wars_matrix2 

# Combine both Star Wars trilogies in one matrix
all_wars_matrix <- rbind(star_wars_matrix, star_wars_matrix2)
```

*** =sct
```{r}
msg = "Do not override the variables that have been defined for you in the workspace (`star_wars_matrix` and `star_wars_matrix2`)."
test_object("star_wars_matrix", eq_condition = "equal", undefined_msg = msg, incorrect_msg = msg)
test_object("star_wars_matrix2", eq_condition = "equal", undefined_msg = msg, incorrect_msg = msg)
test_object("all_wars_matrix", incorrect_msg = "Did you use the `rbind()` correctly to create `all_wars_matrix()`? `rbind()` should take two arguments: `star_wars_matrix` and `star_wars_matrix2`, in this order.")

success_msg("Wonderful! Continue with the next exercise and see how you can combine the results of the `rbind()` function with the `colSums()` function!")
```


--- type:NormalExercise xp:100 skills:1 key:1bfe5ae096
## The total box office revenue for the entire saga

Just like every [`cbind()`](http://www.rdocumentation.org/packages/base/functions/cbind) has a [`rbind()`](http://www.rdocumentation.org/packages/base/functions/cbind), every [`colSums()`](http://www.rdocumentation.org/packages/base/functions/colSums) has a [`rowSums()`](http://www.rdocumentation.org/packages/base/functions/colSums). Your R workspace already contains the `all_wars_matrix` that you constructed in the previous exercise; type `all_wars_matrix` to have another look. Let's now calculate the total box office revenue for the entire saga.

*** =instructions
- Calculate the total revenue for the US and the non-US region and assign `total_revenue_vector`. You can use the [`colSums()`](http://www.rdocumentation.org/packages/base/functions/colSums) function.
- Print out `total_revenue_vector` to have a look at the results.

*** =hint
You should use the [`colSums()`](http://www.rdocumentation.org/packages/base/functions/colSums) function with `star_wars_matrix` as the argument to find the total box office per region.

*** =pre_exercise_code
```{r}
load(url("http://s3.amazonaws.com/assets.datacamp.com/course/intro_to_r/all_wars_matrix.RData"))
```

*** =sample_code
```{r}
# all_wars_matrix is available in your workspace
all_wars_matrix

# Total revenue for US and non-US
total_revenue_vector <- 
  
# Print out total_revenue_vector
```

*** =solution
```{r}
# all_wars_matrix is available in your workspace
all_wars_matrix

# Total revenue for US and non-US
total_revenue_vector <- colSums(all_wars_matrix)

# Print out total_revenue_vector
total_revenue_vector
```

*** =sct
```{r}
msg = "Do not change the contents of `all_wars_matrix`; it was created for you in the workspace."
test_object("all_wars_matrix", eq_condition = "equal", undefined_msg = msg, incorrect_msg = msg)
test_function("colSums", "x", incorrect_msg = "Did you use the `colSums()` function on the all_wars_matrix?")
test_object("total_revenue_vector",
            incorrect_msg = "Have you correctly assigned the result of `colSums(all_wars_matrix)` to `total_revenue_vector`?")
test_output_contains("total_revenue_vector", incorrect_msg = "Don't forget to print out `total_revenue_vector`!")
success_msg("Bellissimo! Head over to the next exercise to learn matrix subsetting.")
```


--- type:NormalExercise xp:100 skills:1 key:41d9d69713
## Selection of matrix elements

Similar to vectors, you can use the square brackets `[ ]` to select one or multiple elements from a matrix. Whereas vectors have one dimension, matrices have two dimensions. You should therefore use a comma to separate that what to select from the rows from that what you want to select from the columns. For example: 

- `my_matrix[1,2]` selects the element at the first row and second column.
- `my_matrix[1:3,2:4]` results in a matrix with the data on the rows 1, 2, 3 and columns 2, 3, 4.

If you want to select all elements of a row or a column, no number is needed before or after the comma, respectively:

- `my_matrix[,1]` selects all elements of the first column.
- `my_matrix[1,]` selects all elements of the first row.

Back to Star Wars with this newly acquired knowledge! As in the previous exercise, `all_wars_matrix` is already available in your workspace.

*** =instructions
- Select the non-US revenue for all movies (the entire second column of `all_wars_matrix`), store the result as `non_us_all`.
- Use `mean()` on `non_us_all` to calculate the average non-US revenue for all movies. Simply print out the result.
- This time, select the non-US revenue for the first two movies in `all_wars_matrix`. Store the result as `non_us_some`.
- Use `mean()` again to print out the average of the values in `non_us_some`.

*** =hint
You can select the entire second column of a matrix `my_matrix` with `my_matrix[,2]`.

*** =pre_exercise_code
```{r}
load(url("http://s3.amazonaws.com/assets.datacamp.com/course/intro_to_r/all_wars_matrix.RData"))
```

*** =sample_code
```{r}
# all_wars_matrix is available in your workspace
all_wars_matrix

# Select the non-US revenue for all movies
non_us_all <- 
  
# Average non-US revenue

  
# Select the non-US revenue for first two movies
non_us_some <- 
  
# Average non-US revenue for first two movies

```

*** =solution
```{r}
# all_wars_matrix is available in your workspace
all_wars_matrix

# Select the non-US revenue for all movies
non_us_all <- all_wars_matrix[,2]
  
# Average non-US revenue
mean(non_us_all)
  
# Select the non-US revenue for first two movies
non_us_some <- all_wars_matrix[1:2,2]
  
# Average non-US revenue for first two movies
mean(non_us_some)
```

*** =sct
```{r}
msg = "Do not change the contents of `all_wars_matrix`; this matrix has already been created for you in the workspace."
test_object("all_wars_matrix", undefined_msg = msg, incorrect_msg = msg)

test_object("non_us_all",
            incorrect_msg = "Did you assign to `non_us_all` the entire second column of `all_wars_matrix`? You can use `[, 2]` to do this!")
test_output_contains("mean(non_us_all)",
                     incorrect_msg = "Have you calculated the average of the values in `non_us_all` by calling `mean(non_us_all)`? Simply print out the result.")
test_object("non_us_some",
            incorrect_msg = "Did you assign to `non_us_some` the non-US revenue for the first two movies? You can use `[1:2,2]` to do this!")
test_output_contains("mean(non_us_some)",
                     incorrect_msg = "Have you calculated the average of the values in `non_us_some` by calling `mean(non_us_some)`? Simply print out the result.")
success_msg("Nice one! Continue to the next exercise.")
```


--- type:NormalExercise xp:100 skills:1 key:c81c656f06
## A little arithmetic with matrices

Similar to what you have learned with vectors, the standard operators like `+`, `-`, `/`, `*`, etc. work in an element-wise way on matrices in R. 

For example, `2 * my_matrix` multiplies each element of `my_matrix` by two.

As a newly-hired data analyst for Lucasfilm, it is your job is to find out how many visitors went to each movie for each geographical area. You already have the total revenue figures in `all_wars_matrix`. Assume that the price of a ticket was 5 dollars. Simply dividing the box office numbers by this ticket price gives you the number of visitors.

*** =instructions
- Divide `all_wars_matrix` by 5, giving you the number of visitors in millions. Assign the resulting matrix to `visitors`.
- Print out `visitors` so you can have a look.

*** =hint
The number of visitors is equal to `all_wars_matrix` divided by 5.

*** =pre_exercise_code
```{r}
load(url("http://s3.amazonaws.com/assets.datacamp.com/course/intro_to_r/all_wars_matrix.RData"))
``` 

*** =sample_code
```{r}
# all_wars_matrix is available in your workspace
all_wars_matrix

# Estimate the visitors
visitors <- 
  
# Print the estimate to the console

```

*** =solution
```{r}
# all_wars_matrix is available in your workspace
all_wars_matrix

# Estimate the visitors
visitors <- all_wars_matrix / 5

# Print the estimate to the console
visitors
```

*** =sct
```{r}
msg = "Do not change the contents of `all_wars_matrix`; this matrix has already been created for you in the workspace."
test_object("all_wars_matrix", undefined_msg = msg, incorrect_msg = msg)

test_object("visitors",
            incorrect_msg = "It looks like `visitors` is not correct. Simply divide `all_wars_matrix` by 5 and store the resulting matrix as `visitors`.")
test_output_contains("visitors", incorrect_msg = "Don't forget to also print out `visitors` so you can have a look.")
success_msg("Great! What do these results tell you? A staggering 92 million people went to see A New Hope in US theaters! Continue to the next exercise.")
```


--- type:NormalExercise xp:100 skills:1 key:1e0b39d6e9
## A little arithmetic with matrices (2) 

Just like `2 * my_matrix` multiplied every element of `my_matrix` by two, `my_matrix1 * my_matrix2` creates a matrix where each element is the product of the corresponding elements in `my_matrix1` and `my_matrix2`. 

After looking at the result of the previous exercise, big boss Lucas points out that the ticket prices went up over time. He asks to redo the analysis based on the prices you can find in `ticket_prices_matrix` (source: imagination).

_Those who are familiar with matrices should note that this is not the standard matrix multiplication for which you should use `%*%` in R._

*** =instructions
- Divide `all_wars_matrix` by `ticket_prices_matrix` to get the estimated number of US and non-US visitors for the six movies. Assign the result to `visitors`.
- From the `visitors` matrix, select the entire first column, representing the number of visitors in the US. Store this selection as `us_visitors`.
- Calculate the average number of US visitors; print out the result.

*** =hint
- You can use the function `mean()` to calculate the average of the inputs to the function.
- To get the number of visitors in the US, select the first column from `visitors` using `visitors[ ,1]`.

*** =pre_exercise_code
```{r}
load(url("http://s3.amazonaws.com/assets.datacamp.com/course/intro_to_r/all_wars_matrix.RData"))
movie_names <- c("A New Hope","The Empire Strikes Back","Return of the Jedi", "The Phantom Menace", "Attack of the Clones", "Revenge of the Sith")
col_titles <- c("US","non-US")
ticket_prices_matrix <- matrix(c(5, 5, 6, 6, 7, 7, 4, 4, 4.5, 4.5, 4.9, 4.9), nrow = 6, byrow = TRUE, dimnames = list(movie_names,col_titles))
```

*** =sample_code
```{r}
# all_wars_matrix and ticket_prices_matrix are available in your workspace
all_wars_matrix
ticket_prices_matrix

# Estimated number of visitors
visitors <- 

# US visitors
us_visitors <- 

# Average number of US visitors

```

*** =solution
```{r}
# all_wars_matrix and ticket_prices_matrix are available in your workspace
all_wars_matrix
ticket_prices_matrix

# Estimated number of visitors
visitors <- all_wars_matrix / ticket_prices_matrix

# US visitors
us_visitors <- visitors[ ,1]

# Average number of US visitors
mean(us_visitors)
```

*** =sct
```{r}
msg <- "Do not change the contents of `all_wars_matrix`; this matrix has already been created for you in the workspace."
test_object("all_wars_matrix", undefined_msg = msg, incorrect_msg = msg)
test_object("ticket_prices_matrix", undefined_msg = msg, incorrect_msg = msg)

test_object("visitors",
            incorrect_msg = "Have you correctly created the `visitors` matrix? You should divide `all_wars_matrix` by `ticket_prices_matrix` to get there.")
test_object("us_visitors", incorrect_msg = "To created `us_visitors`, you should correctly select the entire first column from `visitors`. You can use `[,1]` for this!")
test_output_contains("mean(us_visitors)", incorrect_msg = "Once you have created `us_visitors`, you can use `mean()` to calculate the average number of visitors in the US. Make sure to print out the result.")

success_msg("It's a fact: the R force is with you! This exercise concludes the chapter on matrices. Next stop on your journey through the R language: factors.")
```


